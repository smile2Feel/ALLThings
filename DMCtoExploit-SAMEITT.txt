01:03:13.106 localhost-3: Byte 0x00 -  0x07: Byte offset of this disk block
01:03:13.106 localhost-3: Byte 0x08 -  0x0f: Timestamp: number of microseconds since 1/1/1970
01:03:13.106 localhost-3: Byte 0x10        : Data Validation key from 1 - 126
01:03:13.106 localhost-3: Byte 0x11        : Checksum of timestamp
01:03:13.106 localhost-3: Byte 0x12 -  0x13: Reserved
01:03:13.106 localhost-3: Byte 0x14 -  0x1b: SD or FSD name in ASCII hexadecimal
01:03:13.106 localhost-3: Byte 0x1c -  0x1f: Reserved
01:03:13.106 localhost-3: Byte 0x20 - 0x1ff: 480 bytes of LFSR based data
01:03:13.106 localhost-3:
01:03:13.106 localhost-3: On the left:  the data that was expected ('.' marks unknown value).
01:03:13.106 localhost-3: On the right: the data that was found.
01:03:13.106 localhost-3: Time of first failure: Wednesday, March 8, 2023 01:03:13.096 CST
01:03:13.106 localhost-3:
01:03:13.106 localhost-3: dvpost: /dev/sdq sd4 sd2 0x00000000 0x409900000 4096 0x0 0x5f650f5172736 0x1d 0x1 0xb4 0x0 0 36028797018963971
01:03:13.106 localhost-3:
01:03:13.106 localhost-3:         Data Validation error for sd=sd4,lun=/dev/sdq
01:03:13.106 localhost-3:         Block lba: 0x409900000; sector lba: 0x409900000; xfersize: 4096; relative sector in block: 0x00 ( 0)
01:03:13.106 localhost-3:         ===> Data Validation Key miscompare.
01:03:13.106 localhost-3:         ===> Logical byte address miscompare.
01:03:13.106 localhost-3:         ===> SD or FSD name miscompare.
01:03:13.107 localhost-3:         ===> Data miscompare.
01:03:13.107 localhost-3:         SD or FSD name in block expected: 'sd4'; read: 'sd2     '.
01:03:13.107 localhost-3:         The sector below was written Tuesday, March 7, 2023 23:20:53.305 CST
01:03:13.107 localhost-3: 0x000*  00000004 09900000 ........ ........   00000002 6a100000 0005f650 f5172736
01:03:13.107 localhost-3: 0x010   01..0000 73643420 20202020 00000000   02b40000 20326473 20202020 00000000
01:03:13.107 localhost-3:         Key miscompare always implies Data miscompare. Remainder of data suppressed.

0x409900000 -> 17340301312 j200


客户端日志：
Mar  8 01:01:49 host83 iscsid: iscsid: Kernel reported iSCSI connection 3:0 error (1020 - ISCSI_ERR_TCP_CONN_CLOSE: TCP connection closed) state (3)
Mar  8 01:01:49 host83 kernel: connection3:0: detected conn error (1020)
Mar  8 01:01:51 host83 iscsid: iscsid: connect to 199.168.1.79:3260 failed (Connection refused)
Mar  8 01:01:54 host83 iscsid: iscsid: connection3:0 is operational after recovery (2 attempts)
Mar  8 01:01:54 host83 kernel: sd 11:0:0:6: Power-on or device reset occurred
Mar  8 01:03:12 host83 kernel: sd 11:0:0:5: [sdo] tag#61 FAILED Result: hostbyte=DID_ABORT driverbyte=DRIVER_OK cmd_age=0s
Mar  8 01:03:12 host83 kernel: sd 11:0:0:5: [sdo] tag#61 CDB: Read(10) 28 00 01 35 08 00 00 08 00 00
Mar  8 01:03:12 host83 kernel: blk_update_request: I/O error, dev sdo, sector 20252672 op 0x0:(READ) flags 0x0 phys_seg 256 prio class 0
Mar  8 01:03:14 host83 kernel: connection3:0: detected conn error (1008)
Mar  8 01:03:14 host83 iscsid: iscsid: Kernel reported iSCSI connection 3:0 error (1008 - ISCSI_ERR_PROTO: iSCSI protocol violation) state (3)
Mar  8 01:03:16 host83 iscsid: iscsid: connect to 199.168.1.79:3260 failed (Connection refused)

TGT84节点：
2023-03-08 00:59:54.516854-[INFO]-[TGT]-[pid:2212105][tid:2214373][session.c][session_create][line:449]:session_create:(tsih+isid):20300003d0200, session_id:2, target_id:512, Initiator:iqn.1994-05.com.redhat:bbf5777dc1ca, alias:host83, Initiator addr:199.168.1.83 Target addr:199.168.1.79 target portid:-1 net_mask:24 session_type:1 nop_timeout_time:4500.


2023-03-08 01:00:12.505261-[INFO]-[TGT]-[pid:2212105][tid:2214373][iscsid.c][iscsi_target_cmd_queue][line:1960]:read req scmd session:2 host(Client IP Address: 199.168.1.83) lun(0) tag 1610612834 cmd:0x7f15b66d00f0 offset 2802843648 length 0

//ABORT tag 1610612834
2023-03-08 01:01:12.595469-[INFO]-[TGT]-[pid:2212105][tid:2214373][target.c][target_mgmt_request][line:3957]:excute ABORT TASK from host [iqn.1994-05.com.redhat:bbf5777dc1ca, host83], target [512], tag [1610612834].

//abort cmd已下发到后端
2023-03-08 01:01:12.595504-[INFO]-[TGT]-[pid:2212105][tid:2214373][target.c][abort_cmd][line:3822]:cmd in backstore, host [Initiator: iqn.1994-05.com.redhat:bbf5777dc1ca alias: host83, Client IP Address: 199.168.1.83], target [512], lun [2097491747413782], tag [1610612834], op [28], lba [0xa7100000].

//从后端返回，tag 1610612834 被abort，直接free，不回复客户端
2023-03-08 01:01:12.707004-[INFO]-[TGT]-[pid:2212105][tid:2214373][iscsid.c][iscsi_free_cmd_task][line:1776]:read crc, session:2 host(Client IP Address: 199.168.1.83) lun(2097491747413782, .test2.rbd/j200) tag 1610612834 op 0x28 cmd:0x7f15b66d00f0 buf:0x7f156a406018, offset 2802843648 length 1048576 in data crc(197080015) tgt_crc(197080015) recv_tm(115265) data_head:a710000000000000 77ff0cc70005f651 2034647304950000 0000000020202020 data_tail:6e76e5eadcedcbd4.


//第一个读io
2023-03-08 01:01:12.738175-[INFO]-[TGT]-[pid:2212105][tid:2214373][iscsid.c][iscsi_target_cmd_queue][line:1960]:read req scmd session:2 host(Client IP Address: 199.168.1.83) lun(0) tag 1610612834 cmd:0x7f15b649c0f0 offset 10369368064 length 0

//本次校验的读，第二个相同tag读io
2023-03-08 01:01:12.875960-[INFO]-[TGT]-[pid:2212105][tid:2214373][iscsid.c][iscsi_target_cmd_queue][line:1960]:read req scmd session:2 host(Client IP Address: 199.168.1.83) lun(0) tag 1610612834 cmd:0x7f15b68d60f0 offset 17340301312 length 0

//第一个读io先返回，客户端处理成预期的读IO（客户端处理成第二个读io的返回）
TGT.log.7.gz:2023-03-08 01:01:13.311403-[INFO]-[TGT]-[pid:2212105][tid:2214373][iscsid.c][iscsi_free_cmd_task][line:1776]:read crc, session:2 host(Client IP Address: 199.168.1.83) lun(2097491858581578, .test2.rbd/j202) tag 1610612834 op 0x28 cmd:0x7f15b649c0f0 buf:0x7f154fe08018, offset 10369368064 length 1048576 in data crc(1270294210) tgt_crc(1270294210) recv_tm(115325) data_head:6a10000000000002 f51727360005f650 2032647302b40000 0000000020202020 data_tail:76357f6bec6afed6.

//第二个读io按序返回
TGT.log.7.gz:2023-03-08 01:01:13.630930-[INFO]-[TGT]-[pid:2212105][tid:2214373][iscsid.c][iscsi_free_cmd_task][line:1776]:read crc, session:2 host(Client IP Address: 199.168.1.83) lun(2097491747413782, .test2.rbd/j200) tag 1610612834 op 0x28 cmd:0x7f15b68d60f0 buf:0x7f1557e08018, offset 17340301312 length 1048576 in data crc(1083750503) tgt_crc(1083750503) recv_tm(115325) data_head:0990000000000004 465b2e4f 0005f650 2034647301690000 0000000020202020 data_tail:143c78ec2878f1d8.



0990000000000004.*7364342001.*0000 00000000 20202020
